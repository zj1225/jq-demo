<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    
    <style type="text/css" media="screen">
        body{margin:0; padding:0;}  
        em{ font-style: normal;   }  
    </style>
</head>
<body>
<br />
<br />
<br />
<a href="javascript:;" _title="这里是一段文字-title内容。">鼠标移动过来1</a>
<br />
<br />
<em style="display: inline-block;margin-left:200px;" _title="这里是一段文字-title内容。这里是一段文字-title内容。">鼠标移动过来2</em>
<br />
<br />
<em _title="这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。">鼠标移动过来2</em>
<br />
<br />
<em style="float:right;" _title="这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。">鼠标移动过来2</em>
<br />
<br />
<em style="float:right;" _title="这里是一段文字-title内容。这里是一段文字-title内容。">鼠标移动过来2</em>
<br />
<br />
<div style="text-align: center;"><em _title="这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。">鼠标移动过来2</em></div>
<br />
<br />
<div style="text-align: center;"><em _title="这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。">鼠标移动过来2</em></div>
<br />
<br />
<div style="text-align: center;">
<em style="display: inline-block;margin-left:150px;" _title="这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。">鼠标移动过来2</em>
<br />
<em style="display: inline-block;margin-left:150px;" _title="这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。">鼠标移动过来2</em>
<br />
<em style="display: inline-block;margin-left:300px;" _title="这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。这里是一段文字-title内容。">鼠标移动过来2</em>
<br />
<em style="display: inline-block;margin-left:500px;" _title="这里是一段文字-title内容">鼠标移动过来2</em>
</div>

<br />
<div style="text-align: center; z-index: 99;">
<a href="javascript:;" opar="login">login</a>
<a href="javascript:;" opar="addTitle">给login添加自定义title</a>
<div>
<div style="text-align: left;">
<a href="javascript:;" opar="login">login</a>
<div>
<div style="text-align: right;">
<a href="javascript:;" opar="login">login</a>
<div>
<br />
<br /><br />
<br /><br />
<br /><br />
<br /><br />
<br /><br />
<br /><br />
<br /><br />
<br /><br />
<br /><br />
<br /><br />
<br /><br />
<br /><br />
<br />



<script src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $ = $ || {};
    const proname = 'umx';
    $[proname] = {};

    /**
     * 登录验证
     * @param  {[type]} param   [description]
     * @param  {[type]} calback [description]
     * @return {[type]}         [description]
     */
    $[proname]['login'] = function(param){
        var that = this;
        var picList     = [
            'http://e.hiphotos.baidu.com/image/h%3D300/sign=a9e671b9a551f3dedcb2bf64a4eff0ec/4610b912c8fcc3cef70d70409845d688d53f20f7.jpg',
            'http://b.hiphotos.baidu.com/image/h%3D300/sign=92afee66fd36afc3110c39658318eb85/908fa0ec08fa513db777cf78376d55fbb3fbd9b3.jpg',
            'http://b.hiphotos.baidu.com/image/h%3D300/sign=05b297ad39fa828bce239be3cd1e41cd/0eb30f2442a7d9337119f7dba74bd11372f001e0.jpg',
            'http://a.hiphotos.baidu.com/image/h%3D300/sign=b38f3fc35b0fd9f9bf175369152cd42b/9a504fc2d5628535bdaac29e9aef76c6a6ef63c2.jpg'
        ];
        //显示的postion
        var left        = 0;
        var top       = 0;
        var calback     = null;
        //参数
        if(param && typeof param === 'object'){
            left        = param.left ? param.left : left;
            top         = param.top ? param.top : top;
            picList     = param.picList && param.picList.length > 0 ? param.picList : picList;
            calback     = param.calback && typeof param.calback === 'function' ? param.calback : calback;
        }
        //zindex 找出最大的
        var zindex = 2;
        for(var i = 0; i<document.body.children.length ; i++){
            var item = document.body.children[i];
            if(item.style.zIndex && !isNaN(item.style.zIndex) ){
                //是数字
                zindex = zindex < parseFloat(item.style.zIndex) ? parseFloat(item.style.zIndex) + 1 : zindex + 1;
            }
        }
        //parseInt(Math.random()*(max-min+1)+min,10);  期望最小值-期望最大值
        //图片随机数1-piclength
        var random = parseInt(Math.random()*(picList.length-1+1)+1 , 10); 
        var random_pos_left = parseInt(Math.random()*(220-40+1)+40 , 10);
        var random_pos_top = parseInt(Math.random()*(100-0+1)+0 , 10);
        
        var box = $('<div>');
        box.css({
            'position' : 'fixed' ,
            'z-index' : zindex,
            'left' : left,
            'top' : top,
            'padding' : '10px 10px 0',
            'background' : '#fff',
            'overFlow' : 'hidden',
            'transition' : 'all .3s ease',
            'border' : 'solid #ccc 1px',
            'box-shadow' : '0 0 3px #ccc',
            'opacity' : 0
        });
        //260*150
        var imgBox = $('<div>');
            imgBox.css({
                'display' : 'block',
                'position' : 'relative',
                'background' : 'url("'+picList[random-1]+'") no-repeat',
                'background-size' : '260px 150px',
                'height' : '150px',
                'overflow' : 'hidden'
            });
        var img_o = $('<i>');
            img_o.css({
                'display' : 'block',
                'width': '35px',
                'height' : '35px',
                'box-shadow' : '0 0 5px #000 inset , 0 0 3px #ffff00',
                'position' : 'absolute',
                'z-index' : '1',
                'left' : random_pos_left, //>40  <220
                'top' : random_pos_top, // <100
                'background' : 'rgba(0,0,0,0.5)'
            });
            img_o.appendTo(imgBox);
        var img_t = $('<i>');
            img_t.css({
                'display' : 'block',
                'width': '35px',
                'height' : '35px',
                'box-shadow' : '1px 1px 5px #000 , 1px 1px 5px #ffff00 inset',
                'position' : 'absolute',
                'z-index' : '2',
                'left' : 5, 
                'top' : random_pos_top, 
                'background' : 'url("'+picList[random-1]+'") no-repeat',
                'background-size' : '260px 150px',
                'background-position-x' : random_pos_left*-1,
                'background-position-y' : random_pos_top*-1
            });
            img_t.attr('_leftStart' , 5);//起步原点
            img_t.appendTo(imgBox);
        var img_notice = $('<em>');
            img_notice.css({
                'position' : 'absolute',
                'left' : 0,
                'right' : 0,
                'bottom' : -20,
                'z-index' : 3,
                'background' : '#f75000',
                'color' : '#fff',
                'font-size' : '12px',
                'font-style' : 'normal',
                'line-height' : '20px',
                'height' : '20px',
                'text-align' : 'center',
                'opacity' : 0,
                'display' : 'none'
            });
            img_notice.html('拖动滑块将悬浮图像正确拼合');
            img_notice.appendTo(imgBox);
        var img_success = $('<i>');
            img_success.css({
                'position' : 'absolute',
                'z-index' : 4,
                'display' : 'none',
                'left' : -20,
                'top' : -10,
                'bottom' : -10,
                'opacity' : 0,
                'width' : '20px',
                'border-radius' : '100%',
                'background' : ' linear-gradient(to right,rgba(255,255,255,0) 0% , rgba(255,255,255,0.7) 100%)',
                'box-shadow' : ' 0 0 5px rgba(255,255,255,0.3)',
                'transition' : 'all 0.3s ease',
                'transform' : 'rotate(25deg)'
            }); 
            img_success.appendTo(imgBox);
        var pngBg = 'http://m.qpic.cn/psb?/301a7aca-672d-4dc7-ae25-4eefbc0a0e1b/UH7oDaD8zUAurK*9bGpjYJwHPgbiZzdN8UyKB7woNRM!/b/dL8AAAAAAAAA&bo=BAG3AQAAAAADB5E!&rf=viewer_4';

        var scroll = $('<div>');
            scroll.css({
                'display' : 'block',
                'padding' : '12px 0',
                'position' : 'relative',
                'margin-top' : '10px' 
            });
        var scroll_jdt = $('<span>');
        // font-color =>#dfe1e2
            scroll_jdt.css({
                'display' : 'block',
                'position': 'relative',
                'z-index' : '1',
                'height' : '38px',
                'line-height' : '38px',
                'color' : '#88949d' ,  
                'width' : '260px',
                'font-size' : '12px',
                'text-align' : 'center',
                'background' : 'url("'+pngBg+'") no-repeat',
                'user-select' : 'none',
                'transition' : 'color .3s ease'
            }); 
            scroll_jdt.appendTo(scroll);
            scroll_jdt.html('拖动左边滑块完成上方拼图');
        var scroll_btn = $('<a>');
            scroll_btn.css({
                'display' : 'block',
                'position' : 'absolute',
                'left' : '-10px',
                'top' : '0px',
                'z-index' : '2',
                'width' : '65px',
                'height' : '60px',
                'background' : 'url("'+pngBg+'") no-repeat 0px -46px',
                'overFlow':'hidden',
                'cursor' : 'pointer'
            });
            scroll_btn.attr('_leftStart' , '-10'); //原点
            scroll_btn.appendTo(scroll);
        var other = $('<span>');
            other.css({
                'display' : 'block',
                'border-top' : 'solid #eee 1px',
                'padding' : '10px 0',
                'margin-top' : '10px',
                'text-align' : 'left'
            });
        var a_close = $('<a href="javascript:;">');
            a_close.css({
                'display':'inline-block',
                'width' : '20px' ,
                'height' : '20px',
                'background' : 'url("'+pngBg+'") no-repeat 0 -188px'
            });
            a_close.appendTo(other);

        var a_fresh = $('<a href="javascript:;">');
            a_fresh.css({
                'display':'inline-block',
                'width' : '20px' ,
                'height' : '20px',
                'background' : 'url("'+pngBg+'") no-repeat 0 -341px',
                'margin-left' : '10px'
            });
            a_fresh.appendTo(other);
        
        //鼠标位置
        var _getMousePos = function(e) {
            var e = e || window.e;
            var scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
            var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
            var x = e.pageX || e.clientX + scrollX;
            var y = e.pageY || e.clientY + scrollY;
            return { 'x': x, 'y': y };
        }
        //绑定事件
        var bindEvent = function(){
            a_close.bind('mouseover' , function(){
                a_close.css('background-position' , '0 -214px');
            });
            a_close.bind('mouseout' , function(){
                a_close.css('background-position' , '0 -188px');
            });
            a_close.bind('click' , function(){
                box.animate({'opacity' : 0} , 'fast' , function(){
                    box.remove();
                });
            });
            a_fresh.bind('mouseover' , function(){
                a_fresh.css('background-position' , '0 -367px');
            });
            a_fresh.bind('mouseout' , function(){
                a_fresh.css('background-position' , '0 -341px');
            });
            a_fresh.bind('click' , function(){
                new that['__proto__']['constructor'](param);
                a_close.click();
            });
            //原点
            var leftStart = parseInt(scroll_btn.attr('_leftStart'));
            var leftStart_img = parseInt(img_t.attr('_leftStart'));

            //是否click
            var isClick = false; 
            //click时的位置
            var isClick_position = {};
            //计时
            var time_down = 0;
            scroll_btn.bind('mousedown' , function(e){
                var hand_position = _getMousePos(e);
                //计时
                time_down = e.timeStamp;
                //按下
                isClick = true;
                isClick_position.x = hand_position.x;
                scroll_btn.css('background-position' , '0 -118px');
            });
            $(window).bind('mouseup' , function(e){
                //未点击过scroll_btn
                if(!isClick) return;

                var hand_position = _getMousePos(e);
                isClick = false;
                //计算图片移动的left绝对值
                if( Math.abs(hand_position.x - isClick_position.x + leftStart_img - random_pos_left) <= 3 ){
                    //计时
                    var time_over = parseInt(e.timeStamp - time_down)/1000;
                        time_over = time_over.toFixed(2);

                    //正确范围之内
                    img_success.show();
                    img_success.animate({'opacity' : 1 ,'left' : box.outerWidth() * 1.1} , 'fast' , function(){
                        img_o.animate({'opacity' : 0} , 'fast');
                        img_t.animate({'opacity' : 0} , 'fast');
                    });
                    //提示
                    img_notice.css('background' , '#00aa00').html(time_over+'秒的速度完成验证').show();
                    img_notice.animate({'opacity' : 1 , 'bottom' : 0} , 'fast' , function(){
                        setTimeout(function(){
                            img_notice.animate({'opacity' : 0 , 'bottom' : -20} , 'fast' , function(){ img_notice.hide();});
                        },500);
                        setTimeout(function(){
                            var box_left = parseFloat(box.css('left').split('px')[0]);
                            var box_top = parseFloat(box.css('top').split('px')[0]);
                            //完成
                            box.css({
                                'left' : box_left + (box.width() - 100 )/2,
                                'top' : box_top + (box.height() - 100) /2,
                                'width' : '100px' , 
                                'height' : '100px',
                                'text-align' : 'center'
                            }).html('<i style="display:inline-block; border:solid #00aa00 1px; border-radius:100%; width:40px; height:40px; margin-top:10px;"><i style="display:inline-block; width:25px; height:12px; border-left:solid #00aa00 1px; border-bottom:solid #00aa00 1px; position:relative; left:1px; top:5px; transform:rotate(-45deg);"></i></i><em style="display:block; text-align:center; font-size:12px; color:#00aa00; padding:10px 0;">验证成功</em>');
                        },1000);
                        setTimeout(function(){
                            box.animate({'opacity' : 0} , 'fast' , function(){
                                box.remove();
                                //回调
                                calback();
                            });
                        },2000);
                    });
                    return;
                }
                //否则，回归原点并提示
                scroll_btn.animate({left : leftStart} , 'fast' ,function(){
                    scroll_btn.css('left' , leftStart);
                    scroll_btn.css('background-position' , '0 -46px');
                    scroll_jdt.css('color' , '#88949d');
                });
                img_t.animate({left : leftStart_img} , 'fast' ,function(){
                    img_t.css('left' , leftStart_img);
                });
                img_notice.show();
                img_notice.animate({'opacity' : 1 , 'bottom' : 0} , 'fast' , function(){
                    setTimeout(function(){
                        img_notice.animate({'opacity' : 0 , 'bottom' : -20} , 'fast' , function(){ img_notice.hide();});
                    },500);
                });
                box.css('transform' , 'rotate(-5.5deg)');
                setTimeout(function(){
                    box.css('transform' , 'rotate(5.5deg)');
                },100);
                setTimeout(function(){
                    box.css('transform' , 'rotate(-5.5deg)');
                },200);
                setTimeout(function(){
                    box.css('transform' , 'rotate(5.5deg)');
                },300);
                setTimeout(function(){
                    box.css('transform' , 'rotate(-3.5deg)');
                },400);
                setTimeout(function(){
                    box.css('transform' , 'rotate(0deg)');
                },500);
                

            });
            $(window).bind('mousemove' , function(e){
                var hand_position = _getMousePos(e);
                if(!isClick) return;
                //小于click时的位置 return
                if(hand_position.x < isClick_position.x) return;
                //scroll_btn计算left
                var btn_left = hand_position.x - isClick_position.x + leftStart;
                var img_left = hand_position.x - isClick_position.x + leftStart_img;

                //left大于总长 return
                if(btn_left > scroll_jdt.outerWidth() - scroll_btn.outerWidth() - parseInt(scroll_btn.attr('_leftStart')) ) return;

                //btn 移动
                scroll_btn.css('left' , btn_left);
                //字变色
                scroll_jdt.css('color' , '#dfe1e2');
                //img-t移动
                img_t.css('left' , img_left);
            });

        }
        box.append(imgBox);
        box.append(scroll);
        box.append(other);
        box.appendTo($(document.body));
        box.animate({ 'opacity': 1 }, {
            step: function (now, fx) { 
                $(this).css('transform', 'scale(' + now + ')');
            },
            duration: 'fast',
            complete: function () {
                bindEvent();
                box.css({
                    'height' : box.height(),
                    'width' : box.width()
                });
            }
        }, 'linear');
    }

    /**
     * 显示tip 根据e对象
     * 用法例如：$(document.body).bind('mouseover' , fun);
     * @param  {[type]} e [description]
     * @return {[type]}   [description]
     */
    $[proname]['showTipByMouseOver'] = function(e){
        e = e || e.event;
        var target = e.target || e.srcElement;
        if(!target.getAttribute('_title')) return;
        //over;
        var isOver = true;

        //close\remove
        var _tagMouseOut = function(e){
            //over out
            isOver = false;
            //check
            e = e || e.event;
            var target = e.target || e.srcElement;
            if(!target.getAttribute('_tims'))return;
            var tims = target.getAttribute('_tims');
            var tip = $('.d-tip-title[_tims="'+tims+'"]');
            tip.animate({'opacity' : 0 } , 'fast' , function(){
                tip.remove();
                target.removeAttribute('_tims');
            });
        }
        //bind event
        $(target).unbind('mouseout' , _tagMouseOut);
        $(target).bind('mouseout' , _tagMouseOut);

        //show title
        var _tagShowByTitle = function(e){
            e = e || e.event;
            var target = e.target || e.srcElement;
            //zindex
            var zindex = 2;
            for(var i = 0; i<document.body.children.length ; i++){
                var item = document.body.children[i];
                if(item.style.zIndex && !isNaN(item.style.zIndex) ){
                    //是数字
                    zindex = zindex < parseFloat(item.style.zIndex) ? parseFloat(item.style.zIndex) + 1 : zindex + 1;
                }
            }
            //唯一标识
            var tims = e.timeStamp;
            var tip = $('<div class="d-tip-title cf">');
                tip.css({
                    'position' : 'fixed',
                    'left' : 0,
                    'top' : 0,
                    'max-width' : $(window).outerWidth()/2,
                    'z-index' : zindex,
                    'background' : 'rgba(0,0,0,0.75)',
                    'padding' : '5px 5px 5px 7px',
                    'opacity' : 0,
                    'border-radius' : '5px',
                    'box-shadow' : '0px 0px 3px #000'
                });
                tip.attr('_tims' , tims);
                target.setAttribute('_tims' , tims);
            var p = $('<p>');
                p.css({
                    'display' : 'block',
                    'position' : 'relative',
                    'z-index' : '1',
                    'padding' : '0px',
                    'margin' : '0px',
                    'font-size' : '10px',
                    'color' : '#f0f0f0',
                    'word-break' : 'break-all',
                    'word-wrap' : 'break-word',
                    'line-height' : '20px'
                });
                p.html(target.getAttribute('_title'));
                p.appendTo(tip);
            var arrow = $('<i>');
                arrow.css({
                    'position' : 'absolute',
                    'left' : '10px' ,
                    'bottom' : '-10px',
                    'z-index' : '2',
                    'width' : '0',
                    'height' : '0',
                    'border-left' : '5px solid transparent',
                    'border-right' : '5px solid transparent',
                    'border-top' : '10px solid rgba(0,0,0,0.75)',
                    'transform' : 'rotate(0deg)'
                });
                arrow.appendTo(tip);
            tip.appendTo($(document.body));
            //move top
            var top = $(target).offset().top - tip.outerHeight() - 10;
                top = top - $(window).scrollTop();
            tip.css('top' , top);
            arrow.css('left' , $(target).outerWidth() / 2 - arrow.outerWidth()/2);
            //top 超屏幕
            if(top < 0){
                var top_cp = top; //超了多少
                //tip放下面
                top = $(target).offset().top - $(window).scrollTop() + $(target).outerHeight() + 10;
                tip.css('top' , top);
                arrow.css({
                    'bottom' : 'auto',
                    'top' : '-10px',
                    'transform' : 'rotate(180deg)'
                });
                //放下面也超
                if(parseFloat(tip.css('bottom').split('px')[0]) < 0){
                    var bottom_cp = parseFloat(tip.css('bottom').split('px')[0]);
                    //看谁超的少就用谁
                    if(top_cp > bottom_cp){
                        tip.css('top' , top_cp);
                        arrow.css({
                            'top' : 'auto',
                            'bottom' : '-10px'
                        });
                    }
                }
            }
            //move left
            // console.log('window剩余宽度' , $(window).width() - $(target).outerWidth())
            // console.log('target宽度' , $(target).outerWidth());
            // console.log('target距离左侧' , $(target).offset().left);
            // console.log('target距离右侧' , $(window).width() - $(target).outerWidth() - $(target).offset().left);
            // console.log('tip宽度' , tip.outerWidth());
            //如果target宽度+target右侧宽度大于tip宽度,则tip的left=target左侧距离
            if($(target).outerWidth() + ($(window).width() - $(target).outerWidth() - $(target).offset().left) >= tip.outerWidth()){
                tip.css('left' , $(target).offset().left);
            }
            //如果target宽度+target右侧宽度小于tip宽度,则target距离左侧的宽度借用一点
            else if($(target).outerWidth() + ($(window).width() - $(target).outerWidth() - $(target).offset().left) < tip.outerWidth()){
                //借用的left距离
                var left = tip.outerWidth() - ($(target).outerWidth() + ($(window).width() - $(target).outerWidth() - $(target).offset().left));
                //arrow就是借用的位置开始 计算居中位置
                arrow.css('left' , left + $(target).outerWidth()/2 - arrow.outerWidth()/2);

                //应该左侧计算开始位置
                left = $(target).offset().left - left;
                tip.css('left' , left);
            }
            tip.animate({'opacity' : 1} , 'fast' , function(){});
        }
        //延迟
        setTimeout(function(){
            if(!isOver) return;
            new _tagShowByTitle(e);
        }, 500);
    }


    $(document.body).bind('click' , function(e){
        e = e || e.event;
        var target = e.target || e.srcElement;
        if(target.tagName != 'A')return;
        if(!target.getAttribute('opar')) return;
        switch(target.getAttribute('opar')){
            case 'addTitle' :
                $('a[opar="login"]').attr('_title' , '新增的标题内容。。。。');
                alert('新增title成功，鼠标移上去看看效果');
            break;
            case 'login' : 
                new $.umx.login({   
                    //设置背景图片
                    picList : [],
                    left : 100,
                    top : 100,
                    calback : function(){
                        //验证成功
                        console.log('login');
                    }
                });
            break;
        }
    });




    $(document.body).bind('mouseover' , $.umx.showTipByMouseOver);



</script>
</body>

</html>

